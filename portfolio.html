<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="./favicon.png" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	
		<link href="./_app/immutable/assets/0.57355bcf.css" rel="stylesheet">
		<link href="./_app/immutable/assets/CodeBlock.4f1e9ba5.css" rel="stylesheet">
		<link rel="modulepreload" href="./_app/immutable/entry/start.b8eef9db.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/scheduler.2042f13f.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/singletons.d39d9ba2.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.768855ed.js">
		<link rel="modulepreload" href="./_app/immutable/entry/app.01ce476d.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/index.0614fa34.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/0.4e4768b5.js">
		<link rel="modulepreload" href="./_app/immutable/nodes/3.5ec664b7.js">
		<link rel="modulepreload" href="./_app/immutable/chunks/CodeBlock.1357b359.js">
</head>

<body data-sveltekit-preload-data="hover" style="margin: 0;" data-theme="skeleton">
	<div style="display: contents">   <div class="flex h-screen w-screen text-white"><aside class="h-full bg-[#181818] border-white border-r"><div class="tree w-full space-y-1 " data-testid="tree" role="tree" aria-multiselectable="false" aria-label="" aria-disabled="false">   <details class="tree-item  " data-testid="tree-item" aria-disabled="false"><summary class="tree-item-summary list-none [&amp;::-webkit-details-marker]:hidden flex items-center cursor-pointer  space-x-4 rounded-container-token py-4 px-4 hover:variant-soft " role="treeitem"> <div class="tree-summary-symbol fill-current w-3 text-center transition-transform duration-[200ms]  "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-3 opacity-10"><path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"></path></svg></div>      <div class="tree-item-content">s</div></summary> <div class="tree-item-children  ml-4 " role="group"></div></details></div></aside> <main class="flex-1 flex flex-col h-full bg-[#1f1f1f]"><div class="flex-3 flex h-4/5"><section class="flex-1 flex flex-col h-full"><header class="shadow-lg" data-svelte-h="svelte-wshh5x">login.ts</header> <article class="flex-1 overflow-y-scroll h-full"> <div class="codeblock overflow-hidden shadow bg-neutral-900/90  text-sm text-white rounded-container-token shadow " data-testid="codeblock"> <header class="codeblock-header text-xs text-white/50 uppercase flex justify-between items-center p-2 pl-4"> <span class="codeblock-language">plaintext</span>  <button class="codeblock-btn btn btn-sm variant-soft !text-white">Copy</button></header>  <pre class="codeblock-pre whitespace-pre-wrap break-all p-4 pt-1"><code class="codeblock-code language-plaintext lineNumbers"><!-- HTML_TAG_START -->import { Router } from &#x27;https://deno.land/x/oak@v12.6.0/mod.ts&#x27;
import { generateToken } from &#x27;../utils/token.ts&#x27;
import { getUser } from &#x27;../db.ts&#x27;

const router = new Router();

router
  .post(&quot;/authorize&quot;, async (ctx) =&gt; {
    // check if body exists
    if (!ctx.request.hasBody) {
      ctx.response.status = 400;
      ctx.response.body = { message: &quot;Invalid request&quot; };
      return;
    }

    const { user, password } = await ctx.request.body({ type: &quot;json&quot; }).value;
    // check the credentials
    if (user !== &#x27;&#x27;) {
      ctx.response.status = 400;
      ctx.response.body = { message: &quot;Invalid credentials&quot; };
      return;
    }
    if (password !== &#x27;&#x27;) {
      ctx.response.status = 400;
      ctx.response.body = { message: &quot;Invalid credentials&quot; };
      return;
    }
    
    // get the token
    const userInfo = await getUser(user)
    const token = await generateToken(userinfo)

    // return the token
    ctx.response.body = token;
  })

export default router;<!-- HTML_TAG_END --></code></pre></div></article></section> <section class="flex-1 border-l flex flex-col"><header class="shadow-lg" data-svelte-h="svelte-f1e4w7">localhost:3000</header> <article class="flex-1 flex justify-center items-center"><form class="flex flex-col gap-3"><label class="label"><span data-svelte-h="svelte-s6n4r1">User</span> <input class="input variant-form-material" title="user" type="text" placeholder="@username" value=""></label> <label class="label"><span data-svelte-h="svelte-1kvjhoz">Password</span> <input class="input variant-form-material" title="password" type="password" placeholder="********" value=""></label> <button class="btn variant-form-material w-full" data-svelte-h="svelte-56wpcs">Submit</button> <span class="label" data-svelte-h="svelte-b07tlv"><small><a href="/portfolio">forgot password?</a></small></span></form></article></section></div> <footer class="flex-1 bg-[#181818] border-t p-2 h-1/5">deno > run on http://localhost:3000/
deno > visited /portfolio
deno > </footer></main></div> 
			
			<script>
				{
					__sveltekit_btiytu = {
						base: new URL(".", location).pathname.slice(0, -1),
						env: {}
					};

					const element = document.currentScript.parentElement;

					const data = [null,null];

					Promise.all([
						import("./_app/immutable/entry/start.b8eef9db.js"),
						import("./_app/immutable/entry/app.01ce476d.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 3],
							data,
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>

</html>